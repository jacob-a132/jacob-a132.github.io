<html>
  <body style="margin-left: 30%; margin-right: 30%; margin-top: 10%; font-size: 16px;">
    <h1>
      Secret Santa 2024
    </h1>
    
    <div>
      <div>
        <label style="width: 80px; display: inline-block;">Name</label>
        <input id="name" type="textbox" name="" >
      </div>
      <div>
        <label style="width: 80px; display: inline-block;">Password</label>
        <input id="password" type="textbox" name="" >
      </div>
      <div style="margin: 15px; margin-left: 20px">
        <input type="button" value="Go" onclick="Go()" >
      </div>

      <div id="errorDiv" style="display: none;">
        Wrong name/password
      </div>

      <div id="recipientsWrapper" style="display: none;">
        Your secret santa recipients:
        <div id="recipient1" ></div>
        <div id="recipient2" ></div>
      </div>
    </div>

    <script type="text/javascript">
      function Go() {
        document.getElementById('errorDiv').style = "display: none;";

        const name = document.getElementById('name').value;
        const password = document.getElementById('password').value;

        passwords = {
          "jacob": "jaguar40",
          "meghan": "lemur25",
          "jon": "coyote81",
          "joey": "hamster40",
          "patty": "fox77",
          "ann": "frog30",
          "frank": "rooster16",
        }

        if(name.toLowerCase() in passwords && password === passwords[name.toLowerCase()]){
          fetch('./choices.json')
            .then((response) => response.json())
            .then((allChoices) => {
              const choices = allChoices[name.toLowerCase()];
              document.getElementById('recipientsWrapper').style = "";
              document.getElementById('recipient1').innerHTML = choices[0];
              document.getElementById('recipient2').innerHTML = choices[1];
            });
        } else {
          document.getElementById('errorDiv').style = "color: red;";
        }
      }
    </script>
  </body>
</html>